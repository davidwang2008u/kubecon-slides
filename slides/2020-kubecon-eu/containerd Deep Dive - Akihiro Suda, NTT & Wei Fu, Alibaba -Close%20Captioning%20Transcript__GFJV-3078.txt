containerd Deep Dive: GFJV-3078 - events@cncf.io - Wednesday, August 19, 2020 6:43 AM - 69 minutes

Participant: wordly [W] English (US)

Transcription for wordly [W]

00:07:32 [W] Hi everyone.
00:17:41 [W] We are at the heroes in GT and willful from Alibaba cloud.
00:17:47 [W] This session will dive into the design of containerd e in their new features in the upcoming version 1.4 release and how to exchange control deal with problems.
00:18:02 [W] The first topic is the overview of concerti.
00:18:08 [W] Containerd e is containerd runtime implementation that can be used by highly broken engines such as to occur in kubenetes.
00:18:22 [W] But containerd e itself doesn't create containers instead. It relies on robot. Rebel run times such as ramzi chubaofs ER or Keda quantifiers to create on tears.
00:18:38 [W] Containerd e is containerd runtime implementation church can be used by highly broken engines such as to occur in kubenetes.
00:18:42 [W] But containerd e itself does not create containers instead. It relies on robot Rebel run times such as ramzi chubaofs ER or Kata containers to create on tears.
00:18:43 [W] So control D is offer called as me treble runtime in comparison with Heidi runtime such as Joker and rotary runtime such as ramzi.
00:18:51 [W] Has Army Trevor runtime containerd e is often compared with cryo, which is another implementation of material runtime.
00:19:02 [W] But cryo is not accessible as kanji and you cry or rather puts more Focus. Cri-o API.
00:19:12 [W] So what does quantity actually do?
00:19:18 [W] It provides apis for managing containerd processes container images file system snapshots and relevant metadata.
00:19:30 [W] CPR is available in both of Sierra API uses Mercury mirantis and you consider your knative API, which is used by Joker.
00:19:42 [W] Concerti is mlops cncf graduate projects as in Cuban this Prometheus tomboy and Koreans.
00:19:54 [W] And you cryopreserve puts more focus on Sierra a PA.
00:20:11 [W] So what does conjugate actually do?
00:20:12 [W] It provides apis for managing containerd processes containerd images file system snapshots and William Burns meat eater.
00:20:13 [W] CPR is available in both of cri-o API user kubernative and you consider your knative APA which is used by Joker.
00:20:15 [W] Culture he is mlops cncf graduate projects as in kubernative, Prometheus and boy and Koreans.
00:20:17 [W] Containerd e has open governance model and we have maintenance from several companies including Apple Docker Google IBM and Microsoft as well as entity in Arabic crowd.
00:20:19 [W] This figure shows the architecture or continuity.
00:20:20 [W] You can see several core services such as control service and image service in the middle of the slide.
00:20:28 [W] And you can also see several back in some systems such as run times and five systems from shooters.
00:20:36 [W] These subsystems can be easily extended with programs.
00:20:44 [W] We have support or random proteins such as run see in the divisor.
00:20:52 [W] And subject pronouns such as ovarian first in the battery place.
00:20:59 [W] And also we have contents or programs and stream processors problems.
00:21:06 [W] My co-speaker way fool will take a deeper. Look at these problems. Later.
00:21:13 [W] The next slide shows the adoption stations of continuity.
00:21:20 [W] Control D is adopted by containerd engines such as Joker.
00:21:28 [W] And also by similar kubernative distributions engine management capabilities service providers.
00:21:35 [W] throws their architecture or continuity
00:21:40 [W] you can see several core services such as control service and image service in the middle of the slide.
00:21:41 [W] And you can also see several back in some systems such as run times and five systems Hampshire terms.
00:21:42 [W] These subsystems can be easily extended with programs.
00:21:43 [W] We have support or random proteins such as run see in the divisor.
00:21:43 [W] And subset the pronouns such as ovarian first in the battery place.
00:21:47 [W] And also we have contents or programs and the shrimp processor problems.
00:21:48 [W] My co-speaker way fool will take a deeper. Look at these problems. Later.
00:21:49 [W] The next slide shows the adoption stations of containerd E.
00:21:50 [W] Control D is adopted by consider engines such as Joker.
00:21:51 [W] And also by similar to mirantis distributions engine manager kubenetes service providers.
00:21:54 [W] Notably containerd e is adopted by or of Amazon in k3s, Azure acres and Google Gigi.
00:21:55 [W] And aside from Joker energy mirantis containerd e is adopted by several projects including builder kit, which is modern implementation or Joker beard.
00:22:03 [W] And if you look Street Linux distribution with continuity as the in the process.
00:22:11 [W] and also fuzzy a function as a service infrastructure or containerd e
00:22:17 [W] control D is also included in the latest release of bof fusion.
00:22:26 [W] and you can run containerd e directly on Mac OS using the brim various virtual machine technology as a rotten proud way to run Linux containers on Mac OS
00:22:39 [W] The next topic is about upcoming features incongruity 1424.
00:22:49 [W] Which is to be released this month?
00:22:53 [W] Culturally 1.04 comes with support for busy putting up images.
00:23:03 [W] This is used to prevent you are immersed contains a lot of extra wires.
00:23:18 [W] that aren't actually excessive.
00:23:20 [W] For example python images and Java images tends to contain a bunch of extra Library files.
00:23:29 [W] With Lizzie, bring technology. You can skip downloading this extra files.
00:23:37 [W] Or is he putting we need to use New Image formats such as charges it and eat such is it?
00:23:49 [W] Sasha's it is a barrage of tar.gz format that are was seeking a specific offset is archived.
00:24:00 [W] Easter season is similar to the surgery, but it's arose punching requests for frequently used files.
00:24:10 [W] This slide Compares zettaset charges it and surges it.
00:24:19 [W] With reconsiders is it you can't inspect file offsets without downloading and reading the entire article.
00:24:29 [W] Real estate. Is it and surges it?
00:24:42 [W] With River sitters is it you can't inspect file offsets without downloading and reading the entire archive.
00:24:43 [W] But with strategy you can instead of the fire offsets immediately right after reading the footer structure because the router structure contains office of information of old files.
00:24:46 [W] So if next strike computers surgeries it in astrology.
00:24:52 [W] Easter's is it provides actual file access pattern and reorders five entries?
00:25:03 [W] so that the relevant files can be fully fledged in a single HTTP request.
00:25:06 [W] So if you have a python application in the container the application descriptor file along with the python interpreter trust user search Pinterest Python 3.
00:25:20 [W] And dependencies such as grpc to to sew or squash or together into a single jump inside image.
00:25:28 [W] This chart shows the setup radiancy of several containers such as Python and CCC, which is a little Co see a Hermit and strategy and Easter is it?
00:25:47 [W] With these stretches, it just sucked up latency can be significantly shortened.
00:25:54 [W] It's about seven or eight times faster compared to the jealousy oci homework in the best case.
00:26:03 [W] The threat of dick is available at the URL show in this screen.
00:26:16 [W] And the contrary probably the whole also comes with support for SVG Linux MCS, which means much category security.
00:26:30 [W] With MCS you can assign a category identifier to consider processes and data volumes.
00:26:40 [W] this category identifiers ensure separation across containerless
00:26:48 [W] So a country now is category number 42 cannot access files that are associated with category number 43 because the category number is different.
00:27:02 [W] And the current value 1.24 also bring support for cgroup module 2.
00:27:13 [W] Which is a new cgroup hierarchy and already adopted by Federer since Peter Asante 1.
00:27:21 [W] The Seaver brother has a simple directory they out compared to your brother one.
00:27:29 [W] And also has Autumn features including EBP integration.
00:27:35 [W] of course containerless
00:27:40 [W] So continue with category number 42 cannot access files that are associated with category number 43 because the category number is different.
00:27:41 [W] and the quantity 1.24 also bring support for cgroup version 2
00:27:42 [W] which is a new cgroup hierarchy and already adopted by Pedro since 331.
00:27:43 [W] The seagull brother has a simple directory they out compared to your brother one.
00:27:48 [W] And also has Rotom features including EBP integration.
00:27:48 [W] Cgroup version 2 is also friendly to non-root users as it supports delegating cgroup permission to non-root users.
00:27:50 [W] And with cgroup version to we improved support for router has more.
00:27:57 [W] Which means running containerd e known reducer so us the protects the host from potential vulnerabilities.
00:28:07 [W] Don't worry Smalls has been already adopted by somewhere containerd EPS the projects including Docker registry in k3s.
00:28:19 [W] The rooters mode is also been proposed to the Cubans Upstream as well.
00:28:25 [W] In kinesiology 1.23 the rooters molds.
00:28:34 [W] They don't support imposing resource limitations as in Docker run touches CPUs and Joker and this is memory.
00:28:41 [W] Because I'm privileged users cannot control cgroup on cgroup Roger one host.
00:28:48 [W] And yet containerd e 1.23 didn't support the over infrastructure because of the limitation of the cornea.
00:28:59 [W] But contrary 1.04 do not have this Dropbox.
00:29:07 [W] number two users
00:29:11 [W] and we'll cgroup Russian to we improved support for Reuters mode, which means running containerd e as non reducer so us the protect the host from potential
00:29:13 [W] Suppose resource room teacher when the host is running with cgroup virtual tour and with systemd.
00:29:18 [W] And it also provides over if we add functionality by using shoes over in Phase, which is a user space implementation of over EVS.
00:29:30 [W] Let me show the demo or uterus Cuban artists with containerd e on the signal button to force.
00:29:40 [W] Did he score user in this?
00:29:43 [W] My ID is 1002. This is not the route.
00:29:52 [W] And I don't have access to pseudo. So the stalk want the Bears.
00:29:59 [W] And also this user I'm running containerd e process and accurate process without the root privileges.
00:30:18 [W] So the PS4 Mondo shows Community process and the qubit process running as the router has user.
00:30:28 [W] And let's create a point with cgroup visual stimulation.
00:30:40 [W] DSM for CPU and memory
00:30:47 [W] and the pottery is now running.
00:31:02 [W] And inside of the share we execute shape Sisyphus cgroup CPU, you will Max and memory marks and we can confirm that the cgroup visuals mutation is apprised
00:31:20 [W] expected results of the Privileges
00:31:25 [W] And containerd E 1.2 for also comes with support for Windows and cri-o.
00:31:43 [W] Please refer to the release note for the further information of these changes.
00:31:49 [W] So that's the topic Romi is running of containerd e 1.5.
00:31:58 [W] one point two five meter support by Nolan resource interface
00:32:04 [W] it's a new command interface for controlling notary sources such as cgroup in the same manner as C and I
00:32:15 [W] and 1.25 will also support API for managing put some put some boxes as first class objects.
00:32:28 [W] We are also discussing the support for our type system quota toward version 1.5.
00:32:37 [W] That's all for me.
00:32:40 [W] The next speaker is very full from Alibaba crowd.
00:32:45 [W] Hello everyone.
00:32:48 [W] I also be connected maintainer.
00:32:56 [W] My topic is community.
00:32:57 [W] So no plugins in this talk.
00:33:02 [W] We'll talk about how to integrate it which can ID by is very powerful a sense of bait before we get into the detail. Let's recap the architecture.
00:33:10 [W] Look at this picture currently is for the very more grpc service for the internal component like containerd service contain service day of service and so on.
00:33:23 [W] Tighten all components maintain a very low level resources so that those API is very general purpose.
00:33:31 [W] The developer can assemble those components together in volatile way to view any kind of functionality on the class site and I can only also provide a very useful client library to have to do the adoption.
00:33:46 [W] It is all about the client-side eastern to break but it is good enough. They are they're always requirements about changing the back end.
00:33:59 [W] For example user want to use the new compression algorithm for the image layer data.
00:34:10 [W] So they need the community to handle the New Media type of image and also the user want to use the very special file system for the image storage to integrate.
00:34:18 [W] women like long time
00:34:19 [W] But it is good enough. They are they're always requirements about changing the back end.
00:34:21 [W] For example, the user want to use the new compression algorithm for the image layer data.
00:34:22 [W] So they need the community to handle the New Media type of image and also the user want to use the very special file system for the image storage to integrate it with like long time.
00:34:25 [W] So you might ask her one question.
00:34:25 [W] If the community to accept my proposal about changing the back end do I have to Folklore Apple and Google the answer is no.
00:34:32 [W] containerd e KO care more about the interface
00:34:38 [W] Design, so they know so they know how to work with your very special backing invitation to handle the containerd life cycle and image data.
00:34:52 [W] So you don't need to f*** the Rival you don't need to do the hacking thing just add some configuration to currently will know how to use your very special back and invitation.
00:35:02 [W] We call it external parking magnetism.
00:35:05 [W] There are three kinds of the external plugins.
00:35:07 [W] Why is the streaming processes?
00:35:08 [W] Why is a job to see drivers drivers to your prophecy parking and the last one is the runtime way too practical?
00:35:16 [W] Let's go through one by one.
00:35:19 [W] First one is streaming processor.
00:35:22 [W] When you run container, you have to pull the image down and unpack it for the containerd ifs, we know the image data has manifest configure and the layer data.
00:35:36 [W] We know image layer data is packaging in the TOC archive for the distribution faster.
00:35:47 [W] Allow the image Builder to to compress the image layer, which the gzip and resistant resistant.
00:35:55 [W] There is new one in the gzip is more common case.
00:35:58 [W] Look at this picture when you download the image the cloud will call the diff service to read image layer data to get our
00:36:08 [W] To tell the tar archive and then unpacking to the snapshot if the image layer is with the gz to the compression the county will decompress it into the third string before
00:36:23 [W] If the Intel layer is with the Tuesday Tuesday compression, the county will decompress it into the third string before I go before unpack.
00:36:26 [W] We know currently only support gzip compression right now.
00:36:35 [W] So what if the user wants to use the Z standard image data, so what if the user wants to use the encrypted image data?
00:36:41 [W] At the beginning cannot be integrated with the incredibly media type in the quarterbacks, but it is all about the invitation design rather than interface.
00:36:56 [W] It is not good enough for the other media types of integration. So Canada introduced the streaming processor finally cracking this kind of about 30 plugging is
00:37:09 [W] VP of media type of converter
00:37:11 [W] when a new media type was detected is detected by these by the streaming processor configuration. The community will call the corresponding between the strimzi processor to do the media type converter
00:37:27 [W] dreaming
00:37:28 [W] The first adopt the first option is image created it is a subject is a sample project of kinetic it is it is used to in created the image data.
00:37:43 [W] I also bring a demo with the this standard media type.
00:37:52 [W] Look at this configuration.
00:37:56 [W] He talked to dignity when Kennedy see this kind of the media type pays ecology standard with the argument to get at our cap. So let's check out the demo.
00:38:07 [W] So right now we have the reddish image in the Jeep.
00:38:15 [W] So let's do the car place to the converter together this then the data.
00:38:23 [W] Okay.
00:38:25 [W] Yeah, we can see the image layer data has been changed. So we push to the local registry.
00:38:36 [W] Yeah, and put it unpack it and see what happens next.
00:38:45 [W] Yeah, no surprise Canadian supports this standard by now.
00:38:56 [W] other system that data
00:38:58 [W] Okay.
00:38:58 [W] Yeah, we can see the image layer that I has been changed.
00:38:58 [W] we push to the local registry.
00:38:59 [W] Yeah, and put unpack it and see what happens next.
00:38:59 [W] Yeah, no surprise Canadians support this Tender by now.
00:39:00 [W] That's why we have these it we have the strimzi processor.
00:39:02 [W] Yes, let's see the configuration.
00:39:10 [W] Yes, and appending to the kinetic configuration and restart the connector ID server.
00:39:20 [W] And retry it.
00:39:26 [W] Yes, it was so you can see with the field configuration.
00:39:39 [W] Canadian will handle any kind of the media type of the image data.
00:39:41 [W] We know we can we cannot just use the image layer data for the containerd.
00:39:54 [W] We need to unpack into the introduce snapshot.
00:39:54 [W] currently provide a building's snaps off Vikings and what varies is very special is this is the prophecy parking it is used to redirect the request to the remote external snapshot parking like
00:40:12 [W] very special is this is the prophecy parking it is used to redirect the request to the remote external steps or parking like internal project like internal staff supporting the external
00:40:17 [W] Implement those API server its API service so that the Canadian know how to communicate with your own server.
00:40:26 [W] Like you're swimming processor. You just need you just need to add some configuration to technology how to connect it to your server.
00:40:37 [W] That's it.
00:40:39 [W] That's very simple.
00:40:42 [W] So right now we have cover the streaming processor and the snow and the steps of and steps or snap external plugging all we know there are there are new generation.
00:40:54 [W] Also a longtime invitation for this case. Kennedy will handle you.
00:40:58 [W] the wrong time we to practical.
00:41:01 [W] Before supporting runtime way to practical currently require the other wrong time cri-o to be like once it's AI we know the runtime has their own abstraction.
00:41:18 [W] So, let's see how the CLI approach will introduce the new issue with the containerless data and academic Resources management.
00:41:24 [W] We know each one has their own value currently cannot just introduce those according to the code base.
00:41:31 [W] Credit just need to focus on the Practical to know how to talk to each character runtime.
00:41:47 [W] conda and far crack
00:41:51 [W] Yeah one and also need to implement those API service so that Canadian know how to talk to your server.
00:42:00 [W] And we know Shimmer is the background long-running process before connected to its Canadian need to file it and study it.
00:42:11 [W] In order to make the integration easier Community bring value then convention. For example, where use iot Kennedy talked long long sleep doc we to assume name correctly will
00:42:27 [W] Tootie Ta borrowing it it will call Canady - swim - once the highwomen virtue so you will use the permanent and to find the boundary pass and start it.
00:42:42 [W] And someone and someone will confuse about the name about between the between the Run see doc. We won and translator way to both are the wrong time which you imitation but once they will
00:42:58 [W] The station has a more features than once they talk we won.
00:43:03 [W] Like a grouping feature 1132 similar campaign manager more than one container.
00:43:16 [W] It's very it is very useful for Kuma knative case 1 part 1 1 C we choose to him.
00:43:20 [W] So you can save more CPU and memory resources right now.
00:43:26 [W] See I plug in use run CW to sd4 runtime in the 1.4 release and one more thing.
00:43:34 [W] I want to mention here.
00:43:36 [W] It is the deluxe sample code sub-command. It is used to clean up the resources created by shrimp If U stream is unexpected killed Kennedy will call the delete command to clean up the leaking resources.
00:43:50 [W] So the runtime also need to handle it very carefully.
00:43:54 [W] we know condition right now is use the name pipe as default channel to export the container then output to the receiver like a darker essay I plug in
00:44:08 [W] But we know the risks are required.
00:44:13 [W] The receiver must be alive if the receiver is done for some reason and academic still running and still output a logging data.
00:44:22 [W] main power will be hot and then he impacts the running container.
00:44:26 [W] Other on runtime way to use URL schema to bring to introduce the login plug-in, but the past by default runtime way too much runtime way to invitation must search must support the main pipe.
00:44:44 [W] So if the user look at this picture if the user use the file as the schema use the file name as the past the cannot assume will write the log data type into the file directly.
00:45:01 [W] And if the battery is this is the schema the Canadian stream will set up background long-running process to handle the log like a sister log is product.
00:45:13 [W] Those two schema are optional optional for the runtime author.
00:45:19 [W] And that's it.
00:45:24 [W] That is all my talk. And he's in this talk we know about how to how to integrate it with Clarity, right?
00:45:38 [W] So have you to say I want to join me today and see you next time.
00:45:42 [W] Goodbye.
00:45:43 [W] Hi, I'm ITC roster. Thank you for watching my special.
00:45:57 [W] So if you have questions, please ask. Your questions are abuser Jetta Brooks.
00:46:02 [W] yes, it's possible actually shows a demo or running kubernative including a boars runtime and the put in a user name is Pierce, but
00:46:31 [W] Is not Nats or what you are threatening about if you were talking about just running order you put in the username species.
00:46:41 [W] It's different topic.
00:46:48 [W] So there is Cuba's enhancements proposal for enabling using namespace for kubernative.
00:46:52 [W] So I posted to the hyperlinks in the chat box.
00:46:58 [W] So please refer to securitize enhance and improve the proposal out there.
00:46:59 [W] Is there a question?
00:47:04 [W] So second question is containerd, er needs to be around other demo or machine opposite to cry or which is D Maurice.
00:47:44 [W] I'm confused by this questionnaire because cry or needs demon as well.
00:47:50 [W] Maybe are your total about quadra-port tumor is a demon resign but cry or change any cri-o runtime.
00:47:57 [W] has demo
00:47:59 [W] So second question is containerd, er needs to be around other demo or machine opposite to cry or which is D Maurice.
00:48:04 [W] I'm confused by this questionnaire because they cry or needs demon as well.
00:48:05 [W] Maybe are your total about quadra-port tumor is a demon resign but cry or change any cri-o runtime.
00:48:07 [W] has demo
00:48:08 [W] as a coaching is the same as well.
00:48:08 [W] zero dark ritual
00:48:17 [W] I know question. So the question is in the new version 1.2 for with the resi putting or images away Stars use it in Easter Jets.
00:48:52 [W] Does it come in the box or require setting of some kind so it's provided as external program.
00:49:02 [W] So you need to install a strategy to program and configure Community to use that program.
00:49:16 [W] So instruction is described in the Riverside absurdity of sirte. I press the hyperlink to the services substructure in the chat box.
00:49:21 [W] Is there a dark ritual?
00:49:32 [W] I know question. So the question is in the new version 1.2 for with the resi pulling or images with storageos 8 in Easter Jets.
00:49:37 [W] Does it come in the box or require setting of some kind so it's provided as external program.
00:49:38 [W] program. So you need to install a strategy to program and configure Community to you.
00:49:40 [W] That the program so instruction is described in the website or the surgery itself shelter. I requested a hyperlink to the Stasi substructure in the chat box.
00:49:44 [W] in question
00:49:59 [W] As addicts question great session does Kentucky support Library stirrer or containerd use during runtime upgrades?
00:50:33 [W] Probably it works, but actually we don't have tests of or uploading runtime. So I'm not sure it works. So
00:50:46 [W] Actually, it's better to reboot as a host after upgrading consider G.
00:50:53 [W] Or uploading runtime so I mean sure it works.
00:51:02 [W] Actually, it's better to give you the host after upgrading consider G.
00:51:02 [W] So now time is up.
00:51:36 [W] Thanks again for joining my decision and I'm online on the cncf strap Channel sharp to - cubicle or maintenance.
00:51:48 [W] I'm also on the containerd each other and contrary - deep Channel.
00:51:52 [W] anks.
