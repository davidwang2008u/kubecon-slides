App Testing at Scale: How Bitnami Tests Thousands of Releases Per Month: HUXD-1778 - events@cncf.io - Thursday, November 19, 2020 2:57 PM - 31 minutes

Participant: wordly [W] English (US)

Transcription for wordly [W]

00:00:00 [W] Hello everyone.
00:00:44 [W] Hello everyone.
00:00:46 [W] This is Juan Jose Martinez from Minami and during this session.
00:00:49 [W] I'll be talking about having amethyst thousands of releases per month.
00:00:53 [W] This session will be really useful for those who are already familiar with in a me because you will learn how important is for us to provide you with the latest versions of the Vietnamese Solutions in the different marketplaces.
00:01:05 [W] However, if you are not familiar with the Enemy, I'll be talking about what we do and how our infrastructure to looks like.
00:01:14 [W] Are you be also giving you some practice is we implemented in more pipelines as well as the lessons we learned during all these years at the end of this at the end of the session.
00:01:25 [W] I will also talk about the banany Enterprise offering that allows you to customize the binami offering to meet with your requirements.
00:01:35 [W] But let's start with the basics.
00:01:37 [W] What is V Nami Nami is a catalogue of Open Source software that includes more than 180 packages. Those packages can be easily deployed in any environment any format or any platform.
00:01:52 [W] You don't need to worry about the configuration or the requirements we do that for you.
00:01:59 [W] In case of the environments we allowed you deploy the solutions locally in a public cloud or in your own data center.
00:02:08 [W] However regarding the format's we provide you with knative installers virtual machines containers or deployment templates regarding the platform's we support the major plot providers at this moment.
00:02:23 [W] These photos to provide you with the latest versions of the Vietnamese Solutions in the different marketplaces.
00:02:28 [W] However, if you are not familiar with the Enemy, I'll be talking about what we do and how all the infrastructure to looks like.
00:02:37 [W] I'll be also giving you some extra activities we implement it in your pipe lines as well as the lessons we learned during all these years at the end of this at the end of the session.
00:02:49 [W] will also talk about the banany Enterprise offering that elotl.
00:02:53 [W] How you customize the benami offering to meet with your requirements?
00:02:58 [W] But let's start with the basics.
00:03:01 [W] What is we naming? It Nami is a catalogue of Open Source software that includes more than 180 packages. Those packages can be easily deployed in any environment any format or any platform.
00:03:15 [W] You don't need to worry about the computation or the requirements we do that for you.
00:03:21 [W] In case of the environments we allowed you deploy the solutions locally in a public cloud or in your own data center.
00:03:31 [W] However regarding the format's we provide you with knative installers virtual machines containers or deployment templates regarding the platform's we support the major plot providers at this moment.
00:03:45 [W] But maintaining the catalog these are really hard and complex tasks.
00:03:49 [W] These are some raw numbers about the work we do we are tracking 500 companies in the Upstream projects to ensure that we are using the latest version in order to test them. We have created two thousand five hundred
00:04:39 [W] We are tracking 500 companies in the Upstream projects to ensure that we are using the latest version in order to test them. We have created two thousand five hundred tests that we use in your file and to ensure that the solution is working as expected.
00:04:55 [W] Those numbers are even bigger. We release 12,000 containers every month using those tests that we have created and that's only for containers.
00:05:07 [W] We need to add the 75 charts.
00:05:09 [W] We also support and we need to maintain and well as the symbol VMS virtual machines and knative installers. We also support
00:05:18 [W] but it also requires experience and we have that experience.
00:05:22 [W] We have been working on providing the community of free to the different Cloud providers during the years regarding charts. We have been creating start solutions during the last four.
00:05:34 [W] I'm mentioning the community operator because we are we also have now then the guys offering it allows you get the open source components that we Nami packages and any other commercial application you want to package and post demise it
00:05:50 [W] I'll be talking more about this but being of the presentation.
00:05:54 [W] But nothing of what I said before will be possible. If we don't follow our pillars they defined what the user will find when using the Solutions in any of the platform's we support it.
00:06:06 [W] They will find up-to-date and secure applications because this is a must for us when we needed them. They will also find unified configuration in all those solutions that will allow them to simplify the
00:06:21 [W] doctor of ornithology
00:06:08 [W] the documentation we provide it will be really useful because they can find.
00:06:13 [W] common action to perform on top of our solutions by browsing or docs.bmc.com site finally if they have any questions, we have a high quality to support system that allows Engineers to provide
00:06:28 [W] when asking questions
00:06:26 [W] So let's start with the technical part. Now as you can see in the title automation is key in this process and all the steps.
00:06:34 [W] You can see in this slide represents what the Minami pipeline looks like.
00:06:38 [W] It's really important to say that the denominator you line is deployed on top of having a mature solution that makes the numbing the first consumer of their own Solutions.
00:06:49 [W] Let's dive a little bit on every step now.
00:06:52 [W] The first ones are the version check out on the Dilaudid terrorism Checker tracks for new versions in the Upstream projects ensure that we are using the latest versions of those components.
00:07:04 [W] Then the downloader gets this whole scope of those applications and in stores than in the genome database.
00:07:12 [W] We have a bill that allows has to perform additional actions when preparing the banana package.
00:07:22 [W] So for example, if we are building an odious quick action, we will run the mpm install Kuma together all the npm modules the same for Adobe application.
00:07:35 [W] Those processes are customizable and we can add any other action that application requires before preparing it.
00:07:42 [W] All the dependencies it needs.
00:07:45 [W] In this case.
00:07:46 [W] I'm going to talk about the containerd and chart be the steps.
00:07:49 [W] But before giving them we perform some unit validations that I'll be talking about later.
00:07:56 [W] So now that we have been that we are talking about the containerd and Char Billy steps those processes ensures that we are using the latest versions of live-in nanny components as well as the latest symptomatic disease the chart
00:08:11 [W] I think I would get the latest components. We have clinics to update that job, but at least
00:08:14 [W] This is what I just explained.
00:08:16 [W] We can see that the docket when building the dockerfile.
00:08:20 [W] We are running the apt-get and ATP are great for months.
00:08:24 [W] Well, maybe to get updates and the apt-get upgrade Commons that allows us to include the latest versions of the system packages inside the arena me continue. Once we updated that solution. We will include that new container
00:08:39 [W] So the charge will be using the latest packages as well.
00:08:42 [W] Now the last part in this file and if they containerd validation on the charm validation, I mentioned before that. We also perform some you need validation when plugging the application that you need validation ensures that we are using the correct.
00:08:57 [W] And that the component that we have packaged it's ready to be used inside the container and the charts.
00:08:59 [W] The container and charleville ation.
00:09:03 [W] He's performed by the Vietnam evaluation system. I will be talking about that now.
00:09:09 [W] These validation system consists of a set of tools screams some files that defines the action to perform when validating the different applications in all the supported platforms those set of tools is creates our scanning tools
00:09:24 [W] James I'm files that defines the action to perform when validating the different applications in all the supported platforms those set of tools is creates our scanning tools to check that there are no good reliability snyk containerd carrots
00:09:40 [W] There are noble religiously containerd charts or testing tools like property or Casper years that allows us to perform different actions in the different solutions as I just mentioned.
00:09:54 [W] We are scanning the different containing some charts to find if there is any vulnerability updating the content
00:10:01 [W] if we find any we will be automatically updating those containers to mitigate the issue that we found.
00:10:10 [W] In order to be sure that the charts can be deployed. Currently.
00:10:14 [W] We deploy them using the default parameters and the coast on ones that we also perform our great prophecies using the helm a break command to ensure that the user can upgrade the solutions from a previous lesson.
00:10:29 [W] Using Puppeteer or Casper? Yes, we can access the application externally and ensure that we can log in into the application or install and learning or at the end in.
00:10:41 [W] in service or create new sites or jobs depending on the application.
00:10:46 [W] Finally.
00:10:47 [W] We also have some carrot strips that access the application internally.
00:10:52 [W] Let's say that we can access the container and ensure that a file is saved.
00:10:58 [W] Or that Winery company execute correctly.
00:11:03 [W] I am sure that a fight Isis or that Winery company executive Authority.
00:11:11 [W] The applications we test our obligations that we have in the catalog. For example with this WordPress Joomla read my mind. We are not only testing the application.
00:11:23 [W] So we are also testing all the components that are included inside the deployment.
00:11:27 [W] for example, in the case of Wordpress, we are testing that the database is working properly and that we can access it without any issue.
00:11:38 [W] Supported platforms are the ones I mentioned before we are taking that all solutions can be deployed totally in all the major flow provided no matter if you are using a chart for a containerd, I will turn my team or an epiphany story.
00:11:53 [W] immune or a multiplayer solution
00:11:56 [W] if we take a closer look to the pipeline code we can see that this code that I'm showing here takes care of checking that the charge solution works properly after installing it without no parameters or after setting the default parameters to
00:12:11 [W] Should we are subject that the aggregate this works properly after upgrading the application from a previous version and now going to deploy a banana the pool with Intel solution and perform other type of test
00:12:24 [W] To install the solution. I went to the GitHub repository and got the latest version of the binami. The week is Russian.
00:12:29 [W] You can easily install it using the commands.
00:12:32 [W] I'm highlighting their once your room those commands you will need to wait for the application to be ready Let's Get It Started Now.
00:12:45 [W] As you can see here.
00:12:46 [W] The application is fully deployed right now, and we can also get the URL.
00:12:54 [W] I'm the username and password to access the application.
00:13:04 [W] If we assess the URL, we can check if we can login into the application using the credentials that we obtained.
00:13:18 [W] As you can see here. We love improperly using the username user.
00:13:25 [W] And we can look out properly as well.
00:13:31 [W] Let's see how we name it is these login logout functionality as you can see here.
00:13:37 [W] The numbing has created a log in log out the script that uses Casper years to access application.
00:13:44 [W] As you can see here. We love improperly using this username user.
00:13:50 [W] And we can look out properly as well.
00:13:56 [W] Let's see how we name it is this login logout functionality as you can see here.
00:14:02 [W] The enemy has created a log in log out the script that uses Casper years to access application.
00:14:10 [W] The login function requires some credentials that we need to provide on the logout function doesn't require those provincial those functions are defined in an external file the login function.
00:14:37 [W] And doesn't require those provincial.
00:14:41 [W] Those functions are defined in an external file the login function wait for the selectors to appear and usually the inputs that we have provided to the tool to log into your application.
00:14:56 [W] Once once we have logged in you can see that we confirm that the login was successful by waiting for the logout button Top beer.
00:15:07 [W] In case of the logout function, we wait for the logout button to appear and then click on it and wait for the title login to appear again. In this case we have
00:15:22 [W] Bottoms up here and then click on it and wait for the title login to appear again. In this case. We have logged out from the application. Successfully.
00:15:36 [W] Let's run the Minami validation tool by now.
00:15:40 [W] In this case, we require to pass the name of the application as well as some inputs that I will be sharing data and the name of the test. We want to run.
00:15:52 [W] The inputs the Json file contain the credentials and the information to update the application. For example, the hose on the port and the username and password to use.
00:16:08 [W] If we're on the toll now we will get the results.
00:16:24 [W] As you can see here.
00:16:25 [W] The tool is using the inputs that we have provided.
00:16:35 [W] And it also shows that the logging logging functionality works properly.
00:16:40 [W] We just run the external validation you so we login and logout from the application properly using a web browser.
00:16:52 [W] Let's run the internet valuation now.
00:16:58 [W] From inside the container to verify that everything is working as expected.
00:17:03 [W] For example, we confirm that the persistent directories are created properly those persistent data studies allows you to upgrade the container and chart without losing any data.
00:17:19 [W] Apart from that there are some files that we need to be created for the going T to work properly.
00:17:25 [W] We ensure that those files and Innovative properly after passing the result.
00:17:31 [W] the application is ready to be used.
00:17:37 [W] If we take a look at the validation to Common now, we can see that we are also providing the name of the application as well as Json file with some inputs and the name of the fort under containerd when we want to run those tests.
00:17:56 [W] The content notification file is the following one. We are also providing the host and port or the username and password of the application.
00:18:05 [W] There are some cases in which those inputs are not required, but we need to specify them in all cases.
00:18:19 [W] If we run the toilet now we can see the output.
00:18:29 [W] As you can see here that this we're successfully run.
00:18:34 [W] Let me confirm that the directories are passing Health Care System under the files that we were looking for our vad.
00:18:46 [W] We can also see that there are other tests that we perform to ensure that the solution and all the environment is working as expected.
00:18:55 [W] If I go to the Minami pipeline now, I can get all the results of all the tests we perform when testing a solution. Let's open that job.
00:19:09 [W] As you can see here.
00:19:10 [W] There are some files that are generated when testing the solutions you can see there the antivirus scanner and the CV is Colonel that checks for vulnerabilities.
00:19:23 [W] vulnerabilities. Let's open those files.
00:19:30 [W] Then the vetos is Canary shows that all the files that we are including are correct. And there are it confirms that there is not any infected files.
00:19:40 [W] We can see all the vulnerabilities that are affecting all solution.
00:19:40 [W] You can see a lot of bone are abilities here, but none of them are currently fix if they were fixed.
00:19:48 [W] We will have the information about the variation that fix the issue.
00:19:56 [W] Let's get now the results of the test are no validation. We were talking before and the internal validation as you can see here.
00:20:05 [W] We could look into the application properly create a post or even on blows and image to the application. Those tests were passed through safely.
00:20:17 [W] Let's check the internal validation. Now as you can see there. The information is the same one that the one I was showing before.
00:20:31 [W] All these tests are passed when testing a solution and all of them confirms that the solution means up to the secure and ready to use but apart from Ultimate in the process. You will also need to simplify
00:20:46 [W] Get things faster in our case as I mentioned at the beginning.
00:20:37 [W] We are performing some unique validation when packaging the product at the beginning to ensure that the what we have created is ready to be included in our contains from that time on we only need to update the containers with the
00:20:52 [W] system packages or any other component that application makes
00:20:44 [W] This configuration allows us to release a new containerd every day without needing to be worried about any other delays into high gear. As you can see here. We have released a new version of that the whole week a Vietnamese solution three hours ago,
00:20:59 [W] Another version available and another way to see two days ago.
00:21:02 [W] Now that you know everything about having a me test the entire catalog.
00:21:06 [W] I'm going to give you some lessons you will learn during all these years security must be your top priority and we take security seriously in binami.
00:21:16 [W] No matter is you're building your asset for internal use for for external use you need to ensure that there is no doubt any security vulnerability affecting my profile.
00:21:27 [W] You also need to maintain your code quality.
00:21:29 [W] It's good to release the solution as soon as possible, but it's also good to maintain the quality of the solution. You are creating tool. So you need to set up processes to find and fix any kind of issues that are
00:21:44 [W] Finally automation is here again because I want to be sure that you understand how important this is.
00:21:49 [W] You need to automate your processes as much as you've done to get a rose system.
00:21:56 [W] But those ones are not the only lesson to learn.
00:21:59 [W] We also learned that we need to review the library of test. Regularly.
00:22:04 [W] We need to ensure that we are testing the correct functional. It is in most applications.
00:22:08 [W] We are testing so it's really important to balance quality versus quantity because no matter if you have hundreds of tests, if you are not running the correct test and test in the correct position LEDs, you will be releasing a
00:22:23 [W] Implementation is also really important.
00:22:20 [W] you need to generate internal and external documentation to allow your themes and users to use their Solutions.
00:22:29 [W] You are creating finally support is one of four pillars.
00:22:33 [W] You need to provide people to get answers when they have any questions.
00:22:40 [W] So what's next you can go and get any of the charts. We support from not be have depository size showed before you will find there the information about how to install them in your own environment.
00:22:53 [W] You will also find great tutorials in Orthodox. Don't be nominal from side. If you need to deploy any other solution, you know, you can go to our main site in a medic calm and get the differential rotation from there.
00:23:08 [W] If you want to get more from our catalog you can be see tons of those vmware.com to learn more about our commercial operator.
00:23:15 [W] That's commercial offering allows you to customize the minimum solution to meet with your requirements this way you can benefit from the binami piling to build your own assets.
00:23:28 [W] This is the end of the session. I hope you enjoy it and thank you for watching.
00:23:57 [W] Sorry, can you hear me now?
00:24:00 [W] Yeah, there was a problem.
00:24:02 [W] Okay, there was a problem with the with the microphone. So yeah, I have been answering all the questions in the chat that you have been posting.
00:24:11 [W] There is a new question that I'll be I'll be publishing and answering in life.
00:24:19 [W] So the question is does the deployment platform being or container requires some install application to room?
00:24:27 [W] Elevation locally, so I publish it if you want.
00:24:33 [W] Yeah. Sorry.
00:24:34 [W] this this is new.
00:24:35 [W] This is a new platform for me. So
00:24:40 [W] well, we don't need we don't need any any tool in the in the remote instance or the remote containerd BM or whatever.
00:24:51 [W] We are testing because what we use is SSH connection that we copy all the tools and the test.
00:25:01 [W] Remote matching or remote container or whatever we are testing.
00:24:59 [W] So yeah, we don't need to install anything and we don't install anything in the users machines to test as ever.
00:26:05 [W] So, I don't know if anyone.
00:26:26 [W] So, I don't know if anyone.
00:26:33 [W] when when building and testing the Dynamic Solutions, I explained explained so as well I thought
00:26:46 [W] but the process looks
00:26:51 [W] MSM multi-tier Solutions, we all set of tests, but we customize them depending on the on the platform.
00:27:05 [W] We are testing all of the or the kind of asset.
00:27:08 [W] We are we are testing but well the general idea is what I use plain during the presentation.
00:27:29 [W] regarding the question if we have
00:27:38 [W] SSH directly and run the test in the remote matching.
00:27:52 [W] as well
00:27:58 [W] there is another gun.
00:28:12 [W] There is another gun.
00:28:20 [W] Well, there was a question at the beginning that related to this bunet abilities and that can affect or catalog in regards to see bees we scan the system by looking
00:28:35 [W] airborne and abilities to update the containers but regarding the
00:28:43 [W] The ruby gems and everything we we
00:28:59 [W] with the latest packages
00:29:06 [W] Stimpy it's forever for several applications in one of the packages. The application uses we work.
00:29:37 [W] Okay, so if there is not any other questions, I'll be slack. You can pay me one José martos. I can answer all the questions you have after this presentation
00:29:53 [W] um, I can answer all the questions you have after this presentation if you have
00:29:58 [W] any more questions in the future or if you
00:30:09 [W] Ping or GitHub repositories. So to reach as an answer ask any questions you have.
00:30:50 [W] So it's time to finish.
00:30:53 [W] Thank you everyone for attending this this this useful.
00:31:00 [W] See you soon.
